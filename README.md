# Notexport (note + export)

Python tool for 
1. Export highlights and Notes from Apple Books to local CSV/Excel files
2. Fetch the word meaning
3. Create Anki Cards.

## Usage

### Dump Notes from Apple Books

```shell
python main.py \
    --title "<keywords in book title>" \
    --output <your desired output path, data/booktitile_timestamp/notes.csv as default>
    --after <time filter in format YYYYMMDD-hhmmss, e.g., 20230903-175824, default to None, indicating 19700101-000000>
    --before <time filter in format YYYYMMDD-hhmmss, e.g., 20230903-175824, default to None, indicating NOW>
    --join_vocabulary <If you would like to join word meaning from local vocabularies, set it to True, otherwise leave it as default (False)>
```

### Convert MDD/MDX dictionary files to local SQLite Database
```shell
python notexport/vocabulary/local_vocabulary.py \
    --mdx_path <mdx_file_path> \
    --sqlite_db_path <output db file location, when set to None, db will saved aside mdx file under the same folder>
```

**This function relies on [mdict-query](https://github.com/mmjang/mdict-query)**, which is added as a submodule under `notexport/ext`, remember to:
```shell
git submodule init && git submodule update
```

### Create Anki Cards

```shell
python notexport/anki/transform.py \
    --data_path <your file location, which must contain columns ['Title', 'CleanedWord', 'meaning', 'BroaderText']. It's highly suggested to be generated by main.py with join_vocabulary>
```

## Milestone

- [x] Dump Highlights & Notes to a local file, supporting filters by 1) book name 2) time range
- [x] Query local vocabulary mdx/sqlite database for word meaning.
- [x] Create Anki Cards with contents in HTML format

## Acknowledge
1. [angela-zhao](https://github.com/angela-zhao) and her project [apple-books-annotations-exporter](https://github.com/angela-zhao/apple-books-annotations-exporter/tree/master)
2. [mmjang](https://github.com/mmjang) and his project [mdict-query](https://github.com/mmjang/mdict-query)

